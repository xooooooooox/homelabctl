# Package registry for homelabctl setup
# This file defines available packages and their metadata
#
# Schema Reference:
# -----------------
# packages:
#   <package-name>:
#     desc: <string>                 # Required: short description
#     category: <category-name>      # Required: must match defined category
#     check-cmd: <command>           # Optional: command to check if installed (default: package name)
#     homepage: <url>                # Optional: project homepage
#
#     # Dependency fields (space-separated package names)
#     requires: <pkg1> <pkg2>        # Required deps, auto-installed before target
#     recommends: <pkg1> <pkg2>      # Recommended deps, shown as hint after install
#     conflicts: <pkg1> <pkg2>       # Mutually exclusive, blocks install if any installed
#
#     # Platform-specific dependencies (nested format)
#     # Platforms: linux, darwin, freebsd, etc. (from `uname -s`, lowercased)
#     # Default behavior: platform values are APPENDED to base values
#     # Override syntax: prefix with ! to REPLACE base values
#     #   - "!pkg1 pkg2" -> clears base, uses "pkg1 pkg2"
#     #   - "!"          -> clears base, returns empty
#     platform:
#       linux:
#         requires: <pkg>            # Appended to base requires on Linux
#         recommends: <pkg>          # Appended to base recommends on Linux
#         conflicts: <pkg>           # Appended to base conflicts on Linux
#       darwin:
#         recommends: "!pkg"         # Override: replaces base recommends on macOS
#
# categories:
#   <category-name>:
#     desc: <string>                 # Category description

packages:
  # System Prerequisites
  homebrew:
    desc: macOS package manager
    category: system
    check-cmd: brew
    homepage: https://brew.sh/

  gnu-getopt:
    desc: GNU getopt for argument parsing
    category: system
    check-cmd: getopt
    homepage: https://github.com/util-linux/util-linux

  # Shell, Terminal, and Navigation
  zsh:
    desc: Z shell
    category: shell
    check-cmd: zsh
    homepage: https://www.zsh.org/

  tmux:
    desc: Terminal multiplexer
    category: shell
    check-cmd: tmux
    recommends: fzf
    homepage: https://github.com/tmux/tmux

  ohmyzsh:
    desc: Framework for managing Zsh configuration
    category: shell
    check-cmd: "dir:~/.oh-my-zsh"
    requires: zsh
    homepage: https://ohmyz.sh/

  starship:
    desc: Cross-shell prompt
    category: shell
    check-cmd: starship
    homepage: https://starship.rs/

  zoxide:
    desc: Smarter cd command
    category: shell
    check-cmd: zoxide
    recommends: fzf
    homepage: https://github.com/ajeetdsouza/zoxide

  fzf-tab-completion:
    desc: Tab completion using fzf for bash/zsh
    category: shell
    check-cmd: "dir:~/.fzf-tab-completion"
    requires: fzf
    homepage: https://github.com/lincheney/fzf-tab-completion

  # Editors
  vim:
    desc: Vi improved text editor
    category: editors
    check-cmd: vim
    homepage: https://www.vim.org/

  neovim:
    desc: Hyperextensible Vim-based text editor
    category: editors
    check-cmd: nvim
    homepage: https://neovim.io/
    recommends: ripgrep fd fzf bat

  # Languages and Runtimes
  dotnet-sdk:
    desc: .NET SDK for building and running .NET applications
    category: languages
    check-cmd: dotnet
    homepage: https://dotnet.microsoft.com/

  nodejs:
    desc: JavaScript runtime
    category: languages
    check-cmd: node
    homepage: https://nodejs.org/
    recommends: vfox

  jdk:
    desc: Java Development Kit
    category: languages
    check-cmd: java
    homepage: https://adoptium.net/
    recommends: vfox

  python:
    desc: Python programming language
    category: languages
    check-cmd: python3
    homepage: https://www.python.org/
    recommends: vfox

  go:
    desc: Go programming language
    category: languages
    check-cmd: go
    homepage: https://go.dev/
    recommends: vfox

  rust:
    desc: Rust programming language
    category: languages
    check-cmd: rustc
    homepage: https://www.rust-lang.org/
    recommends: vfox

  vfox:
    desc: Cross-platform version manager
    category: languages
    check-cmd: vfox
    homepage: https://vfox.lhan.me/

  ruby:
    desc: Ruby programming language
    category: languages
    check-cmd: ruby
    homepage: https://www.ruby-lang.org/
    recommends: vfox

  mvn:
    desc: Apache Maven build tool
    category: languages
    check-cmd: mvn
    requires: jdk
    homepage: https://maven.apache.org/
    recommends: vfox

  # DevOps Tools
  kubectl:
    desc: Kubernetes command-line tool
    category: devops
    check-cmd: kubectl
    homepage: https://kubernetes.io/docs/reference/kubectl/

  helm:
    desc: Kubernetes package manager
    category: devops
    check-cmd: helm
    recommends: kubectl
    homepage: https://helm.sh/

  kubecm:
    desc: Kubernetes context manager
    category: devops
    check-cmd: kubecm
    requires: kubectl
    homepage: https://kubecm.cloud/

  virtualbox:
    desc: Cross-platform virtualization software
    category: devops
    check-cmd: VBoxManage
    homepage: https://www.virtualbox.org/

  vagrant:
    desc: Virtual machine management
    category: devops
    check-cmd: vagrant
    recommends: virtualbox
    homepage: https://www.vagrantup.com/

  docker:
    desc: Container runtime
    category: devops
    check-cmd: docker
    homepage: https://www.docker.com/

  containerd:
    desc: Industry-standard container runtime
    category: devops
    check-cmd: containerd
    homepage: https://containerd.io/

  docker-compose:
    desc: Multi-container Docker applications
    category: devops
    check-cmd: docker-compose
    recommends: docker
    homepage: https://docs.docker.com/compose/

  terraform:
    desc: Infrastructure as code tool
    category: devops
    check-cmd: terraform
    homepage: https://www.terraform.io/

  ansible:
    desc: IT automation platform
    category: devops
    check-cmd: ansible
    recommends: python
    homepage: https://www.ansible.com/

  # Version Control and Git Tools
  git:
    desc: Distributed version control system
    category: vcs
    check-cmd: git
    homepage: https://git-scm.com/

  lazygit:
    desc: Simple terminal UI for git commands
    category: vcs
    check-cmd: lazygit
    homepage: https://github.com/jesseduffield/lazygit
    requires: git

  tig:
    desc: Text-mode interface for git
    category: vcs
    check-cmd: tig
    requires: git
    homepage: https://jonas.github.io/tig/

  git-credential-manager:
    desc: Cross-platform Git credential storage
    category: vcs
    check-cmd: git-credential-manager
    requires: git
    homepage: https://github.com/git-ecosystem/git-credential-manager
    # Platform-specific:
    # - Linux AMD64: uses prebuilt binary, recommends pass/gpg for credential storage
    # - Linux ARM64: no prebuilt binary, requires dotnet-sdk (dotnet tool install)
    # - macOS: uses Homebrew and system keychain
    platform:
      linux:
        recommends: pass gpg
      linux-arm64:
        requires: dotnet-sdk
        recommends: pass gpg

  yadm:
    desc: Yet Another Dotfiles Manager
    category: vcs
    check-cmd: yadm
    requires: git
    recommends: gpg
    homepage: https://yadm.io/

  # Security and Cryptography
  gpg:
    desc: GNU Privacy Guard
    category: security
    check-cmd: gpg
    homepage: https://gnupg.org/

  pinentry:
    desc: GPG passphrase entry dialog
    category: security
    check-cmd: pinentry
    recommends: gpg
    homepage: https://gnupg.org/related_software/pinentry/

  pass:
    desc: Standard unix password manager
    category: security
    check-cmd: pass
    requires: gpg
    homepage: https://www.passwordstore.org/

  # Search and File Utilities
  fzf:
    desc: Fuzzy finder for command line
    category: search
    check-cmd: fzf
    homepage: https://github.com/junegunn/fzf
    platform:
      darwin:
        recommends: fzf-tab
      linux:
        recommends: fzf-tab-completion

  fd:
    desc: Fast and user-friendly find alternative
    category: search
    check-cmd: fd
    homepage: https://github.com/sharkdp/fd

  ripgrep:
    desc: Fast recursive grep alternative
    category: search
    check-cmd: rg
    homepage: https://github.com/BurntSushi/ripgrep

  bat:
    desc: Cat clone with syntax highlighting
    category: search
    check-cmd: bat
    homepage: https://github.com/sharkdp/bat

  eza:
    desc: Modern replacement for ls
    category: search
    check-cmd: eza
    homepage: https://github.com/eza-community/eza

  tealdeer:
    desc: Fast tldr client written in Rust (tldr)
    category: search
    check-cmd: tldr
    homepage: https://github.com/dbrgn/tealdeer

  # Development Tools
  jq:
    desc: Lightweight JSON processor
    category: dev-tools
    check-cmd: jq
    homepage: https://jqlang.github.io/jq/

  shellcheck:
    desc: Shell script static analysis tool
    category: dev-tools
    check-cmd: shellcheck
    homepage: https://www.shellcheck.net/

  glow:
    desc: Render Markdown on the CLI
    category: dev-tools
    check-cmd: glow
    homepage: https://github.com/charmbracelet/glow

  markdownlint-cli:
    desc: Markdown linting tool
    category: dev-tools
    check-cmd: markdownlint
    requires: nodejs
    homepage: https://github.com/igorshubovych/markdownlint-cli

  # System Utilities
  mc:
    desc: MinIO client for S3-compatible storage
    category: utilities
    check-cmd: mc
    homepage: https://min.io/docs/minio/linux/reference/minio-mc.html

  fastfetch:
    desc: Fast system information tool
    category: utilities
    check-cmd: fastfetch
    homepage: https://github.com/fastfetch-cli/fastfetch

categories:
  system:
    desc: System-level prerequisites and package managers
  shell:
    desc: Shell, terminal, and navigation tools
  editors:
    desc: Text editors and IDEs
  languages:
    desc: Programming languages and runtimes
  devops:
    desc: DevOps, containers, and infrastructure tools
  vcs:
    desc: Version control and Git tools
  security:
    desc: Security and cryptography tools
  search:
    desc: Search and file utilities
  dev-tools:
    desc: Development and code quality tools
  utilities:
    desc: System utilities and miscellaneous tools
