# homelabctl configuration
# This file follows radp-bash-framework's configuration structure
# Priority: Environment variables (GX_*) > YAML values > defaults

radp:
  env: local
  # Framework settings override (optional)
  fw:
    banner-mode: off
    log:
      debug: false
      level: info
      console:
        enabled: false
      file:
        enabled: false
  # Application-specific extensions
  # Variables defined here will be available as gr_radp_extend_* in shell
  extend:
    homelabctl:
      # Add your application-specific configuration here

      # GitLab configuration
      gitlab:
        # Installation settings
        default_type: gitlab-ce
        default_version: latest

        # Directory paths
        config_home: /etc/gitlab
        data_home: /var/opt/gitlab
        backup_home: /var/opt/gitlab/backups
        config_backup_home: /etc/gitlab/config_backup

        # Remote/NAS backup location (optional, leave empty to disable)
        backup_home_remote: "/backup_data"

        # Backup settings
        backup_keep_days: 15
        backup_schedule: "0 4 * * *"

        # User configuration file (optional, applied during init)
        user_config_file: "/data/homelab_gitlab.rb"

        # System requirements
        min_cpu_cores: 4
        min_ram_gb: 4

        # External data directory (NAS mount point)
        # If configured, install will create symlink:
        #   {external_data_dir}/gitlab -> /var/opt/gitlab
        # This allows GitLab data to be stored on NAS without changing default paths
        # Original: g_guest_data_dir=/data
        external_data_dir: "/data"

      # Kubernetes configuration
      k8s:
        # Installation settings
        default_version: "1.30"
        default_install_type: kubeadm

        # Cluster network settings
        default_pod_cidr: "10.244.0.0/16"
        default_cni: flannel
        flannel_url: "https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml"

        # System requirements
        min_cpu_cores: 2
        min_ram_gb: 2

        # Directory paths
        backup_home: /var/opt/k8s/backups/etcd
        extra_config_path: ~/.config/homelabctl/k8s

        # Backup settings
        backup_schedule: "0 2 * * *"
        backup_keep_days: 7

        # Addon profiles are defined in YAML files:
        #   Builtin: libs/k8s/addon/profiles/*.yaml
        #   User: ~/.config/homelabctl/k8s/addon/profiles/*.yaml
        # Use: homelabctl k8s addon profile list

        # Container runtime proxy configuration (optional)
        # Enable if your nodes need HTTP proxy to pull images
        container_runtime_proxy:
          enabled: false
          http_proxy: ""
          https_proxy: ""
          # Bypass proxy for cluster networks and local addresses
          no_proxy: "localhost,127.0.0.1,10.96.0.0/12,10.244.0.0/16"
