# homelabctl configuration
# This file follows radp-bash-framework's configuration structure
# Priority: Environment variables (GX_*) > YAML values > defaults

radp:
  env: local
  # Framework settings override (optional)
  fw:
    banner-mode: off
    log:
      debug: false
      level: warn
      console:
        enabled: true
      file:
        enabled: false
  # Application-specific extensions
  # Variables defined here will be available as gr_radp_extend_* in shell
  extend:
    homelabctl:
      # radp-vagrant-framework user settings
      # Override via GX_RADP_EXTEND_HOMELABCTL_VF_* environment variables
      vf:
        # Config directory (override: GX_RADP_EXTEND_HOMELABCTL_VF_CONFIG_DIR or RADP_VAGRANT_CONFIG_DIR)
        # config_dir:
        # Base config filename (override: GX_RADP_EXTEND_HOMELABCTL_VF_CONFIG_BASE_FILENAME or RADP_VAGRANT_CONFIG_BASE_FILENAME)
        # Auto-detect: vagrant.yaml > config.yaml
        config_base_filename: "vagrant.yaml"
        # Active environment (override: GX_RADP_EXTEND_HOMELABCTL_VF_ENV or RADP_VAGRANT_ENV)
        env: ${radp.env}

      # Setup user configuration
      # setup:
        # User configuration directory (override: GX_RADP_EXTEND_HOMELABCTL_SETUP_USER_DIR)
        # user_dir:

      # GitLab configuration
      gitlab:
        # Backup settings
        backup_keep_days: 15
        backup_schedule: "0 4 * * *"

        # External data directory / NAS mount point (optional)
        # If set, 'gitlab install' creates symlink: {external_data_dir}/gitlab -> /var/opt/gitlab
        # external_data_dir: "/data"

        # Remote/NAS backup location (optional)
        # backup_home_remote: "/backup_data"

        # User configuration file applied during 'gitlab init' (optional)
        # user_config_file: "/data/homelab_gitlab.rb"

      # Kubernetes configuration
      k8s:
        # Installation settings
        default_version: "1.30"
        default_install_type: kubeadm

        # SSH user for connecting to master node (used by worker join)
        ssh_user: root

        # Cluster network settings
        default_pod_cidr: "10.244.0.0/16"
        default_cni: flannel
        flannel_url: "https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml"

        # System requirements
        min_cpu_cores: 2
        min_ram_gb: 2

        # Directory paths
        backup_home: /var/opt/k8s/backups/etcd
        extra_config_path: ~/.config/homelabctl/k8s

        # Backup settings
        backup_schedule: "0 2 * * *"
        backup_keep_days: 7

        # Addon profiles are defined in YAML files:
        #   Builtin: libs/k8s/addon/profiles/*.yaml
        #   User: ~/.config/homelabctl/k8s/addon/profiles/*.yaml
        # Use: homelabctl k8s addon profile list

        # Container runtime proxy configuration (optional)
        # Enable if your nodes need HTTP proxy to pull images
        container_runtime_proxy:
          enabled: false
          http_proxy: ""
          https_proxy: ""
          # Bypass proxy for cluster networks and local addresses
          no_proxy: "localhost,127.0.0.1,10.96.0.0/12,10.244.0.0/16"
