#compdef homelabctl
# Zsh completion script for homelabctl
# Generated by radp-bash-framework with custom dynamic completions

# homelabctl completion helper functions

_homelabctl_complete_packages() {
  local -a packages
  packages=(${(f)"$(homelabctl setup list --names-only 2>/dev/null)"})
  _describe 'package' packages
}

_homelabctl_complete_categories() {
  local -a categories
  categories=(${(f)"$(homelabctl setup list --category-names 2>/dev/null)"})
  _describe 'category' categories
}

_homelabctl_complete_profiles() {
  local -a profiles
  profiles=(${(f)"$(homelabctl setup profile list --names-only 2>/dev/null)"})
  _describe 'profile' profiles
}

_homelabctl() {
  local context state state_descr line
  typeset -A opt_args

  _arguments -C \
    '(-h --help)'{-h,--help}'[Show help]' \
    '(-v --verbose)'{-v,--verbose}'[Enable verbose output]' \
    '--debug[Enable debug output]' \
    '--version[Show version]' \
    '1: :->command' \
    '*:: :->args'

  case "$state" in
  command)
    local -a commands
    commands=(
      'completion:Generate shell completion script'
      'setup:Software installation management'
      'version:Show homelabctl version'
      'vf:Vagrant framework commands'
      'vg:Vagrant command passthrough'
    )
    _describe 'command' commands
    ;;
  args)
    case "${words[1]}" in
    completion)
      _arguments \
        '(-h --help)'{-h,--help}'[Show help]' \
        '1:shell:(bash zsh)'
      ;;
    setup)
      local -a setup_commands
      setup_commands=(
        'info:Show package details'
        'install:Install a software package'
        'list:List available packages'
        'profile:Profile management'
      )
      case "${words[2]}" in
      info)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '1:package:_homelabctl_complete_packages'
        ;;
      install)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-v --version)'{-v,--version}'[Specific version]:version:' \
          '--dry-run[Show what would be installed]' \
          '1:package:_homelabctl_complete_packages'
        ;;
      list)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-c --category)'{-c,--category}'[Filter by category]:category:_homelabctl_complete_categories' \
          '--installed[Show only installed packages]' \
          '--categories[List available categories]' \
          '--names-only[Output package names only]' \
          '--category-names[Output category names only]'
        ;;
      profile)
        local -a profile_commands
        profile_commands=(
          'apply:Apply a setup profile'
          'list:List available profiles'
          'show:Show profile details'
        )
        case "${words[3]}" in
        apply)
          _arguments \
            '(-h --help)'{-h,--help}'[Show help]' \
            '--dry-run[Show what would be installed]' \
            '--continue[Continue on error]' \
            '--skip-installed[Skip already installed packages]' \
            '1:profile:_homelabctl_complete_profiles'
          ;;
        list)
          _arguments \
            '(-h --help)'{-h,--help}'[Show help]' \
            '--names-only[Output profile names only]'
          ;;
        show)
          _arguments \
            '(-h --help)'{-h,--help}'[Show help]' \
            '1:profile:_homelabctl_complete_profiles'
          ;;
        *)
          _describe 'profile command' profile_commands
          ;;
        esac
        ;;
      *)
        _describe 'setup command' setup_commands
        ;;
      esac
      ;;
    version)
      _arguments \
        '(-h --help)'{-h,--help}'[Show help]'
      ;;
    vf)
      local -a vf_commands
      vf_commands=(
        'dump-config:Export merged configuration'
        'generate:Generate standalone Vagrantfile'
        'info:Show current environment information'
        'init:Initialize a new radp-vagrant-framework project'
        'list:List clusters and guests from configuration'
        'template:Manage template'
        'validate:Validate YAML configuration files'
        'version:Show radp-vagrant-framework version'
      )
      case "${words[2]}" in
      dump-config)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-e --env)'{-e,--env}'[Override environment name]:name:' \
          '(-f --format)'{-f,--format}'[Output format]:format:(json yaml)' \
          '(-o --output)'{-o,--output}'[Output file path]:file:_files'
        ;;
      generate)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-e --env)'{-e,--env}'[Override environment name]:name:'
        ;;
      info)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-e --env)'{-e,--env}'[Environment name]:name:' \
          '(-j --json)'{-j,--json}'[Output as JSON]'
        ;;
      init)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-t --template)'{-t,--template}'[Use a template]:name:' \
          '*--set[Set template variable]:var=value:' \
          '1:directory:_files -/'
        ;;
      list)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-e --env)'{-e,--env}'[Override environment name]:name:' \
          '(-v --verbose)'{-v,--verbose}'[Show detailed info]' \
          '(-p --provisions)'{-p,--provisions}'[Show provisions only]' \
          '(-s --synced-folders)'{-s,--synced-folders}'[Show synced folders only]' \
          '(-t --triggers)'{-t,--triggers}'[Show triggers only]'
        ;;
      template)
        local -a template_commands
        template_commands=(
          'list:List available project templates'
          'show:Show template details and variables'
        )
        case "${words[3]}" in
        list)
          _arguments \
            '(-h --help)'{-h,--help}'[Show help]'
          ;;
        show)
          _arguments \
            '(-h --help)'{-h,--help}'[Show help]' \
            '1:template:'
          ;;
        *)
          _describe 'template command' template_commands
          ;;
        esac
        ;;
      validate)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]' \
          '(-e --env)'{-e,--env}'[Override environment name]:name:'
        ;;
      version)
        _arguments \
          '(-h --help)'{-h,--help}'[Show help]'
        ;;
      *)
        _describe 'vf command' vf_commands
        ;;
      esac
      ;;
    vg)
      _arguments \
        '(-h --help)'{-h,--help}'[Show help]' \
        '(-e --env)'{-e,--env}'[Environment name]:name:' \
        '(-c --config)'{-c,--config}'[Config directory path]:dir:_files -/' \
        '*:vagrant args:'
      ;;
    *)
      ;;
    esac
    ;;
  esac
}

_homelabctl "$@"
