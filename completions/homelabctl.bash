# Bash completion script for homelabctl
# Generated by radp-bash-framework

_homelabctl() {
    local cur prev words cword

    # 兼容模式：如果 _init_completion 不存在，使用手动初始化
    if type _init_completion &>/dev/null; then
        _init_completion || return
    else
        COMPREPLY=()
        cur="${COMP_WORDS[COMP_CWORD]}"
        prev="${COMP_WORDS[COMP_CWORD-1]}"
        words=("${COMP_WORDS[@]}")
        cword="$COMP_CWORD"
    fi

    local i cmd_path=""

    # 构建当前命令路径
    for ((i = 1; i < cword; i++)); do
        case "${words[i]}" in
            -*) continue ;;
            *)
                if [[ -z "$cmd_path" ]]; then
                    cmd_path="${words[i]}"
                else
                    cmd_path="$cmd_path ${words[i]}"
                fi
                ;;
        esac
    done

    # Command completions
    case "$cmd_path" in
        '')
            COMPREPLY=($(compgen -W "completion version vf vg  --help --version" -- "$cur"))
            ;;
        'completion')
            COMPREPLY=($(compgen -W "--help" -- "$cur"))
            ;;
        'version')
            COMPREPLY=($(compgen -W "--help" -- "$cur"))
            ;;
        'vf')
            COMPREPLY=($(compgen -W "dump-config generate info init list template validate version  --help" -- "$cur"))
            ;;
        'vf dump-config')
            COMPREPLY=($(compgen -W "--help -e --env -f --format -o --output" -- "$cur"))
            ;;
        'vf generate')
            COMPREPLY=($(compgen -W "--help -e --env" -- "$cur"))
            ;;
        'vf info')
            COMPREPLY=($(compgen -W "--help -e --env -j --json" -- "$cur"))
            ;;
        'vf init')
            COMPREPLY=($(compgen -W "--help -t --template -s --set" -- "$cur"))
            ;;
        'vf list')
            COMPREPLY=($(compgen -W "--help -e --env -v --verbose -p --provisions -s --synced-folders -t --triggers" -- "$cur"))
            ;;
        'vf template')
            COMPREPLY=($(compgen -W "list show  --help" -- "$cur"))
            ;;
        'vf template list')
            COMPREPLY=($(compgen -W "--help" -- "$cur"))
            ;;
        'vf template show')
            COMPREPLY=($(compgen -W "--help" -- "$cur"))
            ;;
        'vf validate')
            COMPREPLY=($(compgen -W "--help -e --env" -- "$cur"))
            ;;
        'vf version')
            COMPREPLY=($(compgen -W "--help" -- "$cur"))
            ;;
        'vg')
            COMPREPLY=($(compgen -W "--help -e --env -c --config" -- "$cur"))
            ;;
        *)
            COMPREPLY=()
            ;;
    esac
}

complete -F _homelabctl homelabctl
